### Test 1: Try to access API WITHOUT authentication (should fail with 401)
GET http://localhost:5093/api/users
Accept: application/json

### Test 2: Login to get token
POST http://localhost:5093/api/auth/login
Content-Type: application/json

{
  "username": "john.doe",
  "password": "password123"
}

### Test 3: GET All Users (with token)
GET http://localhost:5093/api/users
Authorization: Bearer token-john.doe
Accept: application/json

### Test 4: GET User by ID (with token)
GET http://localhost:5093/api/users/2
Authorization: Bearer token-john.doe
Accept: application/json

### Test 5: CREATE User (with token)
POST http://localhost:5093/api/users
Authorization: Bearer token-john.doe
Content-Type: application/json

{
  "firstName": "New",
  "lastName": "Employee",
  "email": "new@example.com",
  "department": "Sales",
  "username": "new.employee",
  "password": "newpass123",
  "role": "Employee"
}

### Test 6: UPDATE User (with token)
PUT http://localhost:5093/api/users/1
Authorization: Bearer token-john.doe
Content-Type: application/json

{
  "firstName": "John Updated",
  "lastName": "Doe",
  "email": "john.updated@example.com",
  "department": "IT Updated",
  "username": "john.doe",
  "password": "password123",
  "role": "Employee"
}

### Test 7: DELETE User that doesn't exist (with token)
DELETE http://localhost:5093/api/users/999
Authorization: Bearer token-john.doe

### Test 8: DELETE User (with token)
DELETE http://localhost:5093/api/users/3
Authorization: Bearer token-john.doe

### ============================================
### ERROR HANDLING TESTS
### ============================================

### Test 9: Trigger Global Exception - Test ErrorHandlingMiddleware
GET http://localhost:5093/api/users/test-exception
Authorization: Bearer token-john.doe
Accept: application/json

### Test 10: Try with invalid token (should fail with 401)
GET http://localhost:5093/api/users
Authorization: Bearer invalid-token
Accept: application/json

### Test 11: Try invalid login credentials (should fail with 401)
POST http://localhost:5093/api/auth/login
Content-Type: application/json

{
  "username": "invalid",
  "password": "wrong"
}

### ============================================
### TOKEN EXPIRATION TEST
### ============================================
### WAIT 1 MINUTE then run this:

### Test 12: Token should be expired (should fail with 401)
GET http://localhost:5093/api/users
Authorization: Bearer token-john.doe
Accept: application/json